
# שדרוג HomeVault - שדות נוספים + דף גרפים

## מה ישתנה

### 1. הוספת שדות חדשים לטבלת items
שדות חדשים שיתווספו למסד הנתונים:
- **purchase_date** - תאריך רכישה
- **purchase_price** - מחיר רכישה
- **warranty_end_date** - תאריך סיום אחריות
- **warranty_file_url** - לינק לתעודת אחריות (טקסט חופשי / URL)
- **phone** - טלפון שירות / חנות
- **has_warranty** - האם יש אחריות (מחושב אוטומטית לפי warranty_end_date)

כל השדות יהיו אופציונליים כדי לא לשבור פריטים קיימים.

### 2. עדכון טופס הפריט (ItemForm)
הוספת השדות החדשים לטופס:
- שדה תאריך רכישה (date picker)
- שדה מחיר רכישה (מספרי)
- שדה תאריך סיום אחריות (date picker)
- שדה לינק לתעודת אחריות (טקסט / URL)
- שדה טלפון שירות

### 3. עדכון תצוגת פריט (ItemView)
הצגת כל השדות החדשים בצורה ברורה:
- תאריך רכישה ומחיר
- סטטוס אחריות (פעילה / פגה / לא הוגדרה) עם צבע מתאים
- לינק ישיר לתעודת אחריות
- כפתור חיוג לטלפון שירות

### 4. דף גרפים חדש (Stats)
דף סטטיסטיקות עם גרפים מעניינים באמצעות recharts:
- **גרף עוגה** - פריטים לפי קטגוריה
- **גרף עמודות** - רכישות לפי חודש (ציר זמן)
- **גרף עוגה** - פריטים עם/בלי אחריות
- **גרף עמודות** - הוצאות לפי קטגוריה
- כרטיסי סיכום: סה"כ פריטים, סה"כ הוצאות, פריטים עם אחריות פעילה

### 5. ניווט
הוספת כפתור ניווט בדשבורד לדף הגרפים.

---

## פרטים טכניים

### מיגרציית מסד נתונים
```sql
ALTER TABLE public.items
  ADD COLUMN purchase_date date,
  ADD COLUMN purchase_price numeric,
  ADD COLUMN warranty_end_date date,
  ADD COLUMN warranty_file_url text,
  ADD COLUMN phone text;
```

### קבצים שישתנו
- **src/pages/ItemForm.tsx** - הוספת שדות חדשים לטופס
- **src/pages/ItemView.tsx** - הצגת שדות חדשים + לינקים + טלפון
- **src/pages/Dashboard.tsx** - הוספת כפתור ניווט לגרפים + הצגת סטטוס אחריות בכרטיסי פריטים
- **src/hooks/useItems.tsx** - עדכון טיפוסים ומוטציות לשדות החדשים

### קבצים חדשים
- **src/pages/Stats.tsx** - דף גרפים וסטטיסטיקות עם recharts
- **src/App.tsx** - הוספת route לדף /stats

### ספריות קיימות בשימוש
- **recharts** - כבר מותקנת, תשמש לגרפים
- **date-fns** + **he locale** - כבר בשימוש, תשמש לתאריכים
- **react-day-picker** - כבר מותקנת, תשמש לבחירת תאריכים
