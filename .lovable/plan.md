

# תוכנית פיתוח - זיהוי תמונות, מסמך הוראות, ועוזר AI

## סקירה כללית

שלושה פיצ'רים חדשים:
1. **זיהוי תמונה חכם** - כשמצלמים מוצר, AI מזהה מה בתמונה ומציע שמות
2. **שדה הוראות הפעלה** - לינק למסמך הוראות של המכשיר
3. **עוזר AI חכם** - שואלים שאלה והוא עונה על בסיס המוצרים שלך

---

## פיצ'ר 1: זיהוי תמונה חכם

### איך זה עובד
- המשתמשת מצלמת מוצר
- התמונה נשלחת ל-AI (Gemini Flash עם יכולת ראייה)
- ה-AI מחזיר 3-5 הצעות לשם המוצר
- מוצג דיאלוג עם האופציות לבחירה
- אם ה-AI לא מצליח לזהות, שם הקובץ משמש כברירת מחדל

### שינויים טכניים
- **Edge Function חדשה**: `supabase/functions/identify-image/index.ts` - שולחת את התמונה ל-Lovable AI (Gemini Flash) כ-base64 ומקבלת הצעות שמות
- **קומפוננטה חדשה**: `src/components/PhotoSuggestDialog.tsx` - דיאלוג שמציג את ההצעות לבחירה, עם אפשרות לכתוב שם ידני
- **עדכון Dashboard.tsx**: הפונקציה `handlePhotoCapture` תשלח קודם לזיהוי, ואז תציג את הדיאלוג

---

## פיצ'ר 2: שדה הוראות הפעלה

### שינויים
- **מיגרציה**: עמודה חדשה `manual_url` (text, nullable) בטבלת `items`
- **עדכון ItemForm.tsx**: שדה קלט חדש "לינק להוראות הפעלה"
- **עדכון ItemView.tsx**: כפתור "הוראות הפעלה" עם אייקון BookOpen שפותח את הלינק
- **עדכון useItems.tsx**: הוספת `manual_url` לממשק ולמוטציות

---

## פיצ'ר 3: עוזר AI חכם

### איך זה עובד
- כפתור צ'אט בדשבורד (או בדף פריט)
- המשתמשת שואלת שאלה כמו "מתי פג האחריות של המקרר?" או "כמה שילמתי על הטלוויזיה?"
- ה-AI מקבל את כל רשימת המוצרים כ-context ועונה
- אם ה-AI לא בטוח לאיזה מוצר מתכוונים, הוא מציג רשימה לבחירה

### שינויים טכניים
- **Edge Function חדשה**: `supabase/functions/ask-assistant/index.ts`
  - מקבלת את השאלה + רשימת הפריטים של המשתמש
  - שולחת ל-Lovable AI עם system prompt שמכיל את כל הפריטים
  - אם לא ברור לאיזה מוצר, מחזיר רשימת מוצרים אפשריים
- **קומפוננטה חדשה**: `src/components/AskAssistant.tsx`
  - Sheet/Drawer שנפתח מלמטה
  - שדה קלט לשאלה
  - אזור תצוגת תשובה עם markdown
  - כשה-AI מחזיר רשימת מוצרים, כל אחד לחיץ ומעביר לדף הפריט
- **עדכון Dashboard.tsx**: כפתור חדש בהדר לפתיחת העוזר

---

## סדר ביצוע

1. מיגרציה - הוספת עמודת `manual_url`
2. Edge Functions - `identify-image` + `ask-assistant`
3. קומפוננטות UI - PhotoSuggestDialog + AskAssistant
4. עדכון דפים קיימים - Dashboard, ItemForm, ItemView, useItems

